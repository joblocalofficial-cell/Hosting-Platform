<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏´‡∏≤‡∏á‡∏≤‡∏ô ‚Äì JobLocal</title>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    
    <style>
        /* BASE & LAYOUT */
        body { font-family: 'Sukhumvit Set', 'Arial', sans-serif; max-width: 600px; margin: 0 auto; padding: 20px 15px; background-color: #f8f8f8; color: #333; }
        .container { background-color: #fff; border-radius: 12px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); padding: 20px; }

        /* HEADER & PROFILE */
        header { display: flex; gap: 15px; align-items: center; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
        #avatar { width: 56px; height: 56px; border-radius: 50%; object-fit: cover; background: #eee; }
        #hello { font-size: 1.1em; font-weight: bold; margin-bottom: 2px; color: #00b900; }
        #uid { font-size: 0.8em; color: #888; }
        
        /* FORM STYLES */
        h2 { font-size: 1.5em; color: #333; margin-top: 25px; margin-bottom: 15px; border-left: 5px solid #00b900; padding-left: 10px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 6px; font-weight: 600; color: #555; font-size: 0.95em; }
        
        /* INPUTS */
        input, select, textarea { 
            width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; 
            box-sizing: border-box; font-size: 1em; transition: border-color 0.3s;
            background-color: #fff;
        }
        input:focus, select:focus, textarea:focus { border-color: #00b900; outline: none; box-shadow: 0 0 0 3px rgba(0, 185, 0, 0.1); }
        
        /* GRID LAYOUT */
        .row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        @media (max-width: 400px) {
            .row { grid-template-columns: 1fr; }
        }

        /* CHECKBOX/PDPA CONSENT */
        .pdpa-group { background-color: #e6ffe6; border: 1px solid #00b900; padding: 15px; border-radius: 8px; margin-bottom: 25px; }
        .pdpa-group label { font-weight: normal; display: flex; align-items: flex-start; margin-bottom: 0; }
        .pdpa-group input[type="checkbox"] { width: auto; margin-right: 10px; margin-top: 2px; }

        /* BUTTON */
        button { 
            background-color: #00b900; color: white; padding: 14px 20px; 
            border: none; border-radius: 8px; cursor: pointer; width: 100%; 
            font-size: 1.1em; font-weight: bold; transition: background-color 0.3s;
        }
        button:hover:enabled { background-color: #008800; }
        button:disabled { background-color: #b3e6b3; cursor: not-allowed; }
        
        /* STATUS */
        .status { margin-top: 10px; font-size: 0.9em; text-align: center; color: #666; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <img id="avatar" alt="Avatar">
            <div>
                <div id="hello">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ LINE...</div>
                <small id="uid">userId: -</small>
            </div>
        </header>

        <form id="f">
            
            <div class="form-group pdpa-group">
                <label for="consent_pdpa">
                    <input type="checkbox" id="consent_pdpa" name="consent_pdpa" required>
                    **‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô PDPA** (‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÅ‡∏•‡∏∞‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç)
                </label>
            </div>

            <h2>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏à‡πâ‡∏≤‡∏á</h2>
            
            <div class="form-group">
                <label for="user_type">‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏Ñ‡∏£/‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÉ‡∏î?</label>
                <select id="user_type" name="user_type" required>
                    <option value="" disabled selected>--- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó ---</option>
                    <option value="‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó / ‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£">‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó / ‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£</option>
                    <option value="‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ / ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Å‡∏¥‡∏à‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏¢‡πà‡∏≠‡∏¢">‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ / ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Å‡∏¥‡∏à‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏¢‡πà‡∏≠‡∏¢</option>
                    <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏)</option>
                </select>
            </div>

            <div class="form-group" id="company_org_group">
                <label for="company_or_org">‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó / ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ú‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏à‡πâ‡∏≤‡∏á</label>
                <input id="company_or_org" name="company_or_org" placeholder="‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó / ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•" required>
            </div>
            
            <div class="row">
                <div class="form-group">
                    <label for="contact_person">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</label>
                    <input id="contact_person" name="contact_person" required>
                </div>
                <div class="form-group">
                    <label for="contact_phone">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ (10 ‡∏´‡∏•‡∏±‡∏Å)</label>
                    <input id="contact_phone" name="contact_phone" type="tel" pattern="[0-9]{10}" placeholder="08x-xxxxxxx" required>
                </div>
            </div>

            <h2>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏á‡∏≤‡∏ô</h2>

            <div class="row">
                <div class="form-group">
                    <label for="job_title_select">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡πâ‡∏≤‡∏á</label>
                    <select id="job_title_select" name="job_title_select" required>
                        <option value="" disabled selected>--- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á ---</option>
                        <option value="‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü">‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü</option>
                        <option value="‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢">‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢</option>
                        <option value="‡∏ä‡πà‡∏≤‡∏á‡∏ã‡πà‡∏≠‡∏°">‡∏ä‡πà‡∏≤‡∏á‡∏ã‡πà‡∏≠‡∏°</option>
                        <option value="‡πÅ‡∏°‡πà‡∏ö‡πâ‡∏≤‡∏ô">‡πÅ‡∏°‡πà‡∏ö‡πâ‡∏≤‡∏ô</option>
                        <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏)</option>
                    </select>
                </div>
                <div class="form-group hidden" id="job_title_other_group">
                    <label for="job_title_other">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏á‡∏≤‡∏ô (‡∏£‡∏∞‡∏ö‡∏∏)</label>
                    <input id="job_title_other" name="job_title_other" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£/‡πÅ‡∏Ñ‡∏ä‡πÄ‡∏ä‡∏µ‡∏¢‡∏£‡πå">
                </div>
                
                <div class="form-group">
                    <label for="job_category">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏á‡∏≤‡∏ô/‡∏´‡∏°‡∏ß‡∏î‡∏á‡∏≤‡∏ô</label>
                    <select id="job_category" name="job_category" required>
                        <option value="" disabled selected>--- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏á‡∏≤‡∏ô ---</option>
                        <option value="‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ (Service)">‡∏á‡∏≤‡∏ô‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ (Service)</option>
                        <option value="‡∏á‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢ (Sales)">‡∏á‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢ (Sales)</option>
                        <option value="‡∏á‡∏≤‡∏ô‡πÅ‡∏°‡πà‡∏ö‡πâ‡∏≤‡∏ô / ‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î (Housekeeping)">‡∏á‡∏≤‡∏ô‡πÅ‡∏°‡πà‡∏ö‡πâ‡∏≤‡∏ô / ‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î (Housekeeping)</option>
                        <option value="‡∏á‡∏≤‡∏ô‡∏ä‡πà‡∏≤‡∏á / ‡∏ã‡πà‡∏≠‡∏°‡∏ö‡∏≥‡∏£‡∏∏‡∏á (Technician)">‡∏á‡∏≤‡∏ô‡∏ä‡πà‡∏≤‡∏á / ‡∏ã‡πà‡∏≠‡∏°‡∏ö‡∏≥‡∏£‡∏∏‡∏á (Technician)</option>
                        <option value="‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ / ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á (Driver)">‡∏á‡∏≤‡∏ô‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ / ‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á (Driver)</option>
                        <option value="‡∏á‡∏≤‡∏ô‡∏Ñ‡∏£‡∏±‡∏ß / ‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (Kitchen)">‡∏á‡∏≤‡∏ô‡∏Ñ‡∏£‡∏±‡∏ß / ‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (Kitchen)</option>
                        <option value="‡∏á‡∏≤‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡πÅ‡∏ü / ‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (Caf√© & Restaurant)">‡∏á‡∏≤‡∏ô‡∏£‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡πÅ‡∏ü / ‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£ (Caf√© & Restaurant)</option>
                        <option value="‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ / ‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô (General Labor)">‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ / ‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô (General Labor)</option>
                        <option value="‡∏á‡∏≤‡∏ô‡∏≠‡∏≠‡∏ü‡∏ü‡∏¥‡∏® / ‡∏ò‡∏∏‡∏£‡∏Å‡∏≤‡∏£ (Office / Admin)">‡∏á‡∏≤‡∏ô‡∏≠‡∏≠‡∏ü‡∏ü‡∏¥‡∏® / ‡∏ò‡∏∏‡∏£‡∏Å‡∏≤‡∏£ (Office / Admin)</option>
                        <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏)</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label for="job_description">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏á‡∏≤‡∏ô / ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥</label>
                <textarea id="job_description" name="job_description" rows="3" placeholder="‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà/‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡πÇ‡∏î‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î"></textarea>
            </div>

            <div class="row">
                <div class="form-group">
                    <label for="location_area">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô / ‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á (‡∏û‡∏¥‡∏°‡∏û‡πå)</label>
                    <input id="location_area" name="location_area" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÇ‡∏ã‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå/‡∏™‡∏≤‡∏°‡πÇ‡∏Ñ‡∏Å">
                    <small>üìå ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Google Map</small>
                </div>
                <div class="form-group">
                    <label for="district">‡∏≠‡∏≥‡πÄ‡∏†‡∏≠/‡πÄ‡∏Ç‡∏ï (‡πÉ‡∏ô‡∏õ‡∏ó‡∏∏‡∏°‡∏ò‡∏≤‡∏ô‡∏µ)</label>
                    <select id="district" name="district" required>
                        <option value="" disabled selected>--- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≥‡πÄ‡∏†‡∏≠ ---</option>
                        <option value="‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏õ‡∏ó‡∏∏‡∏°‡∏ò‡∏≤‡∏ô‡∏µ">‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏õ‡∏ó‡∏∏‡∏°‡∏ò‡∏≤‡∏ô‡∏µ</option>
                        <option value="‡∏Ñ‡∏•‡∏≠‡∏á‡∏´‡∏•‡∏ß‡∏á">‡∏Ñ‡∏•‡∏≠‡∏á‡∏´‡∏•‡∏ß‡∏á</option>
                        <option value="‡∏ò‡∏±‡∏ç‡∏ö‡∏∏‡∏£‡∏µ">‡∏ò‡∏±‡∏ç‡∏ö‡∏∏‡∏£‡∏µ</option>
                        <option value="‡∏´‡∏ô‡∏≠‡∏á‡πÄ‡∏™‡∏∑‡∏≠">‡∏´‡∏ô‡∏≠‡∏á‡πÄ‡∏™‡∏∑‡∏≠</option>
                        <option value="‡∏•‡∏≤‡∏î‡∏´‡∏•‡∏∏‡∏°‡πÅ‡∏Å‡πâ‡∏ß">‡∏•‡∏≤‡∏î‡∏´‡∏•‡∏∏‡∏°‡πÅ‡∏Å‡πâ‡∏ß</option>
                        <option value="‡∏•‡∏≥‡∏•‡∏π‡∏Å‡∏Å‡∏≤">‡∏•‡∏≥‡∏•‡∏π‡∏Å‡∏Å‡∏≤</option>
                        <option value="‡∏™‡∏≤‡∏°‡πÇ‡∏Ñ‡∏Å">‡∏™‡∏≤‡∏°‡πÇ‡∏Ñ‡∏Å</option>
                    </select>
                </div>
            </div>

            <div class="row">
                <div class="form-group">
                    <label for="headcount">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£</label>
                    <input id="headcount" name="headcount" type="number" min="1" value="1" required>
                </div>
                <div class="form-group">
                    <label for="wage_type">‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ñ‡πà‡∏≤‡∏à‡πâ‡∏≤‡∏á</label>
                    <select id="wage_type" name="wage_type" required>
                        <option value="" disabled selected>--- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö ---</option>
                        <option value="‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏•‡∏∞">‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏•‡∏∞</option>
                        <option value="‡∏ß‡∏±‡∏ô‡∏•‡∏∞">‡∏ß‡∏±‡∏ô‡∏•‡∏∞</option>
                        <option value="‡πÄ‡∏´‡∏°‡∏≤‡∏à‡πâ‡∏≤‡∏á">‡πÄ‡∏´‡∏°‡∏≤‡∏à‡πâ‡∏≤‡∏á</option>
                        <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏£‡∏∞‡∏ö‡∏∏)</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label for="wage_amount">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡πà‡∏≤‡∏à‡πâ‡∏≤‡∏á</label>
                <input id="wage_amount" name="wage_amount" placeholder="‡πÄ‡∏ä‡πà‡∏ô 50 ‡∏ö‡∏≤‡∏ó/‡∏ä‡∏°., 1200 ‡∏ö‡∏≤‡∏ó/3‡∏ß‡∏±‡∏ô, ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô 15,000 ‡∏ö‡∏≤‡∏ó" required>
            </div>
            
            <div class="row">
                <div class="form-group">
                    <label for="start_date">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
                    <input id="start_date" name="start_date" type="date">
                </div>
                <div class="form-group">
                    <label for="start_time">‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô</label>
                    <input id="start_time" name="start_time" type="time">
                </div>
            </div>

            <div class="form-group">
                <label for="contact_line_id">LINE ID ‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
                <input id="contact_line_id" name="contact_line_id" placeholder="‡πÄ‡∏ä‡πà‡∏ô joblocal_contact">
            </div>

            <button id="submitBtn" type="submit" disabled>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ LINE‚Ä¶</button>
            <div id="status" class="status"></div>
            
            <input type="hidden" name="line_user_id" id="line_user_id">
            <input type="hidden" name="line_display_name" id="line_display_name">
            <input type="hidden" name="job_title" id="job_title_final">
        </form>
    </div>

    <script>
        // --- CONFIG ---
        const LIFF_ID = "2008394776-k9v7m3Wg"; 
        const GAS_ENDPOINT = "https://script.google.com/macros/s/AKfycbz3rL6bZf13avYEKvGaHQbh3jmaOzGHvyCD_27_bIMkPcPmgOnN1JGL6PmiYEXuMKYk/exec";
        // --- End CONFIG ---

        const $ = id => document.getElementById(id);
        const form = $("f");

        // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
        let userProfile = {};
        let userIdToken = '';

        // --- UI Logic (‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô‡∏ä‡πà‡∏≠‡∏á Input) ---
        const userTypeSelect = $("user_type");
        const jobTitleSelect = $("job_title_select");
        const jobTitleOtherGroup = $("job_title_other_group");
        const jobTitleOtherInput = $("job_title_other");
        const companyOrgGroup = $("company_org_group");
        const companyOrgInput = $("company_or_org");

        userTypeSelect.addEventListener('change', (e) => {
            // ‡∏ã‡πà‡∏≠‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó/‡∏ú‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏à‡πâ‡∏≤‡∏á
            if (e.target.value === '‡∏≠‡∏∑‡πà‡∏ô‡πÜ' || e.target.value === '‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ / ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Å‡∏¥‡∏à‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏¢‡πà‡∏≠‡∏¢') {
                companyOrgInput.placeholder = "‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•/‡∏Å‡∏¥‡∏à‡∏Å‡∏≤‡∏£";
            } else {
                companyOrgInput.placeholder = "‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó/‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£";
            }
        });
        
        jobTitleSelect.addEventListener('change', (e) => {
            // ‡∏ã‡πà‡∏≠‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á "‡∏≠‡∏∑‡πà‡∏ô‡πÜ"
            if (e.target.value === '‡∏≠‡∏∑‡πà‡∏ô‡πÜ') {
                jobTitleOtherGroup.classList.remove('hidden');
                jobTitleOtherInput.required = true;
            } else {
                jobTitleOtherGroup.classList.add('hidden');
                jobTitleOtherInput.required = false;
            }
        });

        // --- LIFF & Form Submission Logic ---
        (async () => {
            try {
                await liff.init({ liffId: LIFF_ID });

                if (!liff.isLoggedIn()) { liff.login(); return; }
                
                userIdToken = liff.getIDToken();

                // 1. ‡∏î‡∏∂‡∏á Profile ‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï UI (‡πÉ‡∏ä‡πâ .then() ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡∏ö‡∏•‡πá‡∏≠‡∏Å)
                liff.getProfile().then(p => {
                    userProfile = p; 
                    $("avatar").src = p.pictureUrl || '';
                    $("hello").textContent = `‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ ${p.displayName}`;
                    $("uid").textContent   = `userId: ${p.userId}`;
                    
                    // ‡πÄ‡∏ï‡∏¥‡∏°‡∏Ñ‡πà‡∏≤ LIFF ‡∏•‡∏á‡πÉ‡∏ô Hidden Fields
                    $("line_user_id").value = p.userId;
                    $("line_display_name").value = p.displayName;
                    
                    $("submitBtn").textContent = "‡∏™‡πà‡∏á‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏á‡∏≤‡∏ô";
                    $("submitBtn").disabled = false;
                }).catch(err => {
                    $("hello").textContent = "‚ùå ‡∏î‡∏∂‡∏á‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ!";
                    $("uid").textContent = "Error: " + err.message;
                    $("submitBtn").textContent = "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ";
                    console.error("Error getting profile:", err);
                });

                // 2. ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°
                form.addEventListener('submit', async (e) => {
                    e.preventDefault();

                    const btn = $("submitBtn");
                    const status = $("status");
                    
                    if (!userIdToken || !userProfile.userId) { 
                        status.textContent = "‚ùå ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• LINE ‡πÑ‡∏°‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà"; 
                        liff.login();
                        return; 
                    }
                    
                    // ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á (‡∏à‡∏≤‡∏Å select ‡∏´‡∏£‡∏∑‡∏≠ input '‡∏≠‡∏∑‡πà‡∏ô‡πÜ')
                    const selectedJobTitle = jobTitleSelect.value;
                    if (selectedJobTitle === '‡∏≠‡∏∑‡πà‡∏ô‡πÜ') {
                        $("job_title_final").value = jobTitleOtherInput.value;
                    } else {
                        $("job_title_final").value = selectedJobTitle;
                    }

                    btn.disabled = true;
                    status.textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‚Ä¶";

                    const formData = new FormData(form);
                    // ‡∏•‡∏ö field ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡πÑ‡∏õ GAS (‡πÄ‡∏ä‡πà‡∏ô select/input '‡∏≠‡∏∑‡πà‡∏ô‡πÜ' ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ)
                    formData.delete('job_title_select');
                    formData.delete('job_title_other');
                    
                    const data = Object.fromEntries(formData.entries());

                    try {
                        const res = await fetch(GAS_ENDPOINT, {
                            method: "POST",
                            headers: {"Content-Type":"application/json"},
                            // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• LIFF Profile, ID Token, ‡πÅ‡∏•‡∏∞ Form Data
                            body: JSON.stringify({ idToken: userIdToken, profile: userProfile, data }) 
                        });
                        
                        const json = await res.json();
                        if (json.ok) {
                            status.textContent = "‚úÖ ‡∏™‡πà‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏∞";
                            setTimeout(() => { if (liff.closeWindow) liff.closeWindow(); }, 1500);
                        } else {
                            status.textContent = "‚ùå ‡∏™‡πà‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: " + (json.error || "unknown");
                            btn.disabled = false;
                        }
                    } catch (err) {
                        status.textContent = "‚ùå ‡πÄ‡∏Ñ‡∏£‡∏∑‡∏≠‡∏Ç‡πà‡∏≤‡∏¢‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î";
                        btn.disabled = false;
                    }
                });

            } catch (e) {
                console.error(e);
                $("hello").textContent = "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î LIFF ‡πÑ‡∏î‡πâ";
                $("uid").textContent   = "";
                $("submitBtn").disabled = true;
                $("submitBtn").textContent = "LIFF Error";
            }
        })();
    </script>
</body>
</html>
